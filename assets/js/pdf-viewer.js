
let pdfDoc=null,pageNum=1;const canvas=document.getElementById('pdfCanvas');const ctx=canvas?canvas.getContext('2d'):null;async function renderPage(num){const page=await pdfDoc.getPage(num);const viewport=page.getViewport({scale:1.2});canvas.width=viewport.width;canvas.height=viewport.height;const renderContext={canvasContext:ctx,viewport};await page.render(renderContext).promise;document.getElementById('pageInfo').textContent=`Сторінка ${pageNum} з ${pdfDoc.numPages}`;}async function showPdf(){const url=window._pdfUrl;const loadingTask=window['pdfjsLib'].getDocument(url);pdfDoc=await loadingTask.promise;pageNum=1;document.getElementById('pdfModal').classList.remove('hidden');renderPage(pageNum);}window.showPdf=showPdf;document.getElementById('prevPage')?.addEventListener('click',()=>{if(pageNum>1){pageNum--;renderPage(pageNum);}});document.getElementById('nextPage')?.addEventListener('click',()=>{if(pageNum<pdfDoc.numPages){pageNum++;renderPage(pageNum);}});document.getElementById('closeModal')?.addEventListener('click',()=>{document.getElementById('pdfModal').classList.add('hidden');});document.getElementById('modalClose')?.addEventListener('click',()=>{document.getElementById('pdfModal').classList.add('hidden');});
